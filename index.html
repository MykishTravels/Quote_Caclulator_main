<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Travel Quote Calculator</title>
    <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-50 p-8">
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect } = React;

        // THIS IS YOUR DATA FROM THE PDF
        const masterData = { "locations": [ { "name": "Maldives", "resorts": [ { "resortName": "Hurawalhi Island Resort", "currency": "USD", "locationType": "Component", "rooms": [ { "type": "Ocean Villa (Shoulder Season)", "price": 1007 }, { "type": "Romantic Ocean Villa (Shoulder Season)", "price": 1051 }, { "type": "Beach Pool Villa (Shoulder Season)", "price": 1271 }, { "type": "Beach Sunset Pool Villa (Shoulder Season)", "price": 1326 }, { "type": "Ocean Pool Villa (Shoulder Season)", "price": 1430 } ], "activities": [ { "name": "Seaplane Transfer (Roundtrip)", "price": 470, "isIncluded": false }, { "name": "Domestic + Boat Transfer (Comfort Class)", "price": 375, "isIncluded": false }, { "name": "Bed & Breakfast to Half Board Supplement", "price": 85, "isIncluded": false }, { "name": "Bed & Breakfast to Full Board Supplement", "price": 130, "isIncluded": false }, { "name": "Mandatory Christmas Eve Gala Dinner", "price": 250, "isIncluded": false }, { "name": "Welcome Drink", "price": 0, "isIncluded": true } ] }, { "resortName": "Cinnamon Dhonveli Maldives", "currency": "USD", "locationType": "Component", "rooms": [ { "type": "Superior Room - Ocean View", "price": 310 }, { "type": "Water Bungalow", "price": 484 }, { "type": "Over Water Suite", "price": 590 } ], "activities": [ { "name": "Speedboat Transfer (25 Minutes)", "price": 170, "isIncluded": false }, { "name": "All Inclusive Supplement", "price": 40, "isIncluded": false }, { "name": "Premium All Inclusive Supplement", "price": 110, "isIncluded": false }, { "name": "Christmas Eve Dinner Supplement", "price": 250, "isIncluded": false } ] }, { "resortName": "Siyam World Maldives", "currency": "USD", "locationType": "Component", "rooms": [ { "type": "Water Villa with Pool + Slide", "price": 938 }, { "type": "Lagoon Villa with Pool + Slide", "price": 1038 }, { "type": "Ocean Villa with Pool + Slide", "price": 1178 } ], "activities": [ { "name": "Combined Return Seaplane Transfer", "price": 490, "isIncluded": false }, { "name": "Combined Return Domestic Flight + Speedboat", "price": 325, "isIncluded": false }, { "name": "WOW! Inclusive Plan (24-Hour Premium)", "price": 0, "isIncluded": true }, { "name": "Green Tax (Mandatory)", "price": 12, "isIncluded": false } ] } ] }, { "name": "Finland", "resorts": [ { "resortName": "Kakslauttanen Arctic Resort", "currency": "EUR", "locationType": "Bundle", "rooms": [ { "type": "Small Cabin (Shoulder Season Package)", "price": 250 }, { "type": "Large Cabin (Shoulder Season Package)", "price": 283 }, { "type": "Small Glass Igloo (Shoulder Season Package)", "price": 598 }, { "type": "Kelo-Glass Igloo (Shoulder Season Package)", "price": 810 } ], "activities": [ { "name": "Buffet Breakfast", "price": 0, "isIncluded": true }, { "name": "Daily Cleaning", "price": 0, "isIncluded": true }, { "name": "Thermal Clothing (Included in activities)", "price": 0, "isIncluded": true }, { "name": "2H Husky Safari (Bundle Option)", "price": 178, "isIncluded": false }, { "name": "2H Reindeer Safari (Bundle Option)", "price": 109, "isIncluded": false }, { "name": "Northern Lights Show", "price": 39, "isIncluded": false } ] }, { "resortName": "Rovaniemi Insider", "currency": "EUR", "locationType": "Bundle", "rooms": [ { "type": "Studio Apartment (Spring Bundle)", "price": 55 }, { "type": "1 Bedroom Apartment with Sauna (Spring Bundle)", "price": 65 }, { "type": "2 Bedroom Apartment with Sauna (Spring Bundle)", "price": 75 } ], "activities": [ { "name": "Guaranteed Aurora Hunting (incl. clothing/drinks)", "price": 210, "isIncluded": false }, { "name": "Husky Sleigh Ride (incl. clothing)", "price": 85, "isIncluded": false }, { "name": "Winter Clothing Set (Included with 3+ activities)", "price": 0, "isIncluded": true }, { "name": "Daily Towel Change", "price": 0, "isIncluded": true } ] } ] } ] };

        function App() {
            const [markup, setMarkup] = useState(10); // 10% Default
            const [discount, setDiscount] = useState(0); // 0% Default
            const [quotes, setQuotes] = useState([]);

            const addQuote = () => {
                setQuotes([...quotes, { location: "Maldives", resort: "", room: "", nights: 1, activities: [] }]);
            };

            const calculateTotal = (quote) => {
                const resortData = masterData.locations.flatMap(l => l.resorts).find(r => r.resortName === quote.resort);
                if (!resortData) return 0;

                const room = resortData.rooms.find(rm => rm.type === quote.room);
                const roomPrice = room ? room.price : 0;
                
                // Discount applies ONLY to stay cost
                const stayCost = (roomPrice * quote.nights) * (1 - (discount / 100));
                
                const activityTotal = quote.activities.reduce((sum, actName) => {
                    const act = resortData.activities.find(a => a.name === actName);
                    return sum + (act ? act.price : 0);
                }, 0);

                const subtotal = stayCost + activityTotal;
                return subtotal * (1 + (markup / 100));
            };

            return (
                <div className="max-w-6xl mx-auto">
                    <h1 className="text-3xl font-bold mb-8">Travel Quote Calculator</h1>
                    
                    {/* Settings Panel */}
                    <div className="bg-white p-6 rounded-xl shadow-sm mb-8 flex gap-8">
                        <div>
                            <label className="block text-sm font-medium text-gray-700">Global Markup (%)</label>
                            <input type="number" value={markup} onChange={(e) => setMarkup(e.target.value)} className="mt-1 border p-2 rounded w-24" />
                        </div>
                        <div>
                            <label className="block text-sm font-medium text-gray-700">Stay Discount (%)</label>
                            <input type="number" value={discount} onChange={(e) => setDiscount(e.target.value)} className="mt-1 border p-2 rounded w-24" />
                        </div>
                    </div>

                    <button onClick={addQuote} className="bg-blue-600 text-white px-6 py-2 rounded-lg mb-4">+ Add Resort to Comparison</button>

                    <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                        {quotes.map((q, idx) => (
                            <div key={idx} className="bg-white p-6 rounded-xl shadow-md border-t-4 border-blue-500">
                                <h3 className="font-bold mb-4">Quote #{idx + 1}</h3>
                                <select 
                                    className="w-full border p-2 mb-4"
                                    onChange={(e) => {
                                        const newQuotes = [...quotes];
                                        newQuotes[idx].resort = e.target.value;
                                        newQuotes[idx].room = ""; // Reset room
                                        setQuotes(newQuotes);
                                    }}
                                >
                                    <option>Select Resort</option>
                                    {masterData.locations.flatMap(l => l.resorts).map(r => (
                                        <option key={r.resortName} value={r.resortName}>{r.resortName}</option>
                                    ))}
                                </select>

                                {q.resort && (
                                    <>
                                        <select 
                                            className="w-full border p-2 mb-4"
                                            onChange={(e) => {
                                                const newQuotes = [...quotes];
                                                newQuotes[idx].room = e.target.value;
                                                setQuotes(newQuotes);
                                            }}
                                        >
                                            <option>Select Room</option>
                                            {masterData.locations.flatMap(l => l.resorts).find(r => r.resortName === q.resort).rooms.map(rm => (
                                                <option key={rm.type} value={rm.type}>{rm.type} (${rm.price})</option>
                                            ))}
                                        </select>
                                        <input 
                                            type="number" 
                                            placeholder="Nights" 
                                            value={q.nights}
                                            onChange={(e) => {
                                                const newQuotes = [...quotes];
                                                newQuotes[idx].nights = e.target.value;
                                                setQuotes(newQuotes);
                                            }}
                                            className="w-full border p-2 mb-4"
                                        />
                                        <div className="mt-4 p-4 bg-blue-50 rounded-lg">
                                            <p className="text-sm text-gray-600">Total (Incl. Markup):</p>
                                            <p className="text-2xl font-bold text-blue-700">
                                                ${calculateTotal(q).toFixed(2)}
                                            </p>
                                        </div>
                                    </>
                                )}
                            </div>
                        ))}
                    </div>
                </div>
            );
        }

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>
