<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Mykish Travels | 2026 Ellaidhoo Engine</title>
    <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-slate-100 p-8">
    <div id="root"></div>
    <script type="text/babel">
        const { useState } = React;

        // SEASONS UPDATED FOR 2026 ONLY 
        const seasons2026 = [
            { start: "2026-01-06", end: "2026-04-30", dbl: 418, child3: 105 },
            { start: "2026-05-01", end: "2026-09-30", dbl: 235, child3: 59 },
            { start: "2026-10-01", end: "2026-10-31", dbl: 315, child3: 79 }
        ];

        function App() {
            const [checkIn, setCheckIn] = useState("");
            const [checkOut, setCheckOut] = useState("");
            const [adults, setAdults] = useState(2);
            const [kids, setKids] = useState(0);
            const [markup, setMarkup] = useState(10);
            const [discount, setDiscount] = useState(0);

            const getNights = () => {
                if (!checkIn || !checkOut) return 0;
                const n = (new Date(checkOut) - new Date(checkIn)) / (1000 * 60 * 60 * 24);
                return n > 0 ? n : 0;
            };

            const getSeason = () => {
                const date = new Date(checkIn);
                // Finds the correct 2026 rate from the PDF table 
                return seasons2026.find(s => date >= new Date(s.start) && date <= new Date(s.end)) || seasons2026[0];
            };

            const calculate = () => {
                const nights = getNights();
                const season = getSeason();
                const totalPeople = parseInt(adults) + parseInt(kids);
                
                // 1. STAY COST: 1st & 2nd child free per contract [cite: 72]
                const roomBase = season.dbl * nights;
                const extraChildCost = kids > 2 ? (season.child3 * nights * (kids - 2)) : 0;
                const stayTotal = roomBase + extraChildCost;

                // 2. DISCOUNT: Applied ONLY to Stay
                const discountedStay = stayTotal * (1 - (discount / 100));

                // 3. TRANSFERS: $250/adult, $125/child roundtrip 
                const transferTotal = (adults * 250) + (kids * 125);

                // 4. MARKUP: Applied to (Discounted Stay + Transfers)
                const subtotal = (discountedStay + transferTotal) * (1 + (markup / 100));

                // 5. GREEN TAX: $12 per person/night (Fixed cost) [cite: 48, 66]
                const greenTax = 12 * totalPeople * nights;

                return subtotal + greenTax;
            };

            return (
                <div className="max-w-2xl mx-auto bg-white rounded-[2.5rem] shadow-2xl overflow-hidden border border-slate-200">
                    <div className="bg-slate-900 p-10 text-white">
                        <h1 className="text-2xl font-black italic tracking-tighter">ELLAIDHOO MALDIVES</h1>
                        <p className="text-blue-400 text-[10px] font-bold uppercase tracking-[0.3em] mt-2">Current 2026 Contract Rates</p>
                    </div>
                    
                    <div className="p-10 space-y-8">
                        <div className="grid grid-cols-2 gap-6">
                            <label className="block text-[10px] font-black text-slate-400 uppercase">Check-In <input type="date" className="block w-full mt-2 p-4 bg-slate-50 border-none ring-1 ring-slate-200 rounded-2xl font-bold" onChange={e => setCheckIn(e.target.value)}/></label>
                            <label className="block text-[10px] font-black text-slate-400 uppercase">Check-Out <input type="date" className="block w-full mt-2 p-4 bg-slate-50 border-none ring-1 ring-slate-200 rounded-2xl font-bold" onChange={e => setCheckOut(e.target.value)}/></label>
                        </div>

                        <div className="grid grid-cols-2 gap-6">
                            <label className="block text-[10px] font-black text-slate-400 uppercase">Adults <input type="number" value={adults} className="block w-full mt-2 p-4 bg-slate-50 border-none ring-1 ring-slate-200 rounded-2xl font-bold" onChange={e => setAdults(e.target.value)}/></label>
                            <label className="block text-[10px] font-black text-slate-400 uppercase">Children <input type="number" value={kids} className="block w-full mt-2 p-4 bg-slate-50 border-none ring-1 ring-slate-200 rounded-2xl font-bold" onChange={e => setKids(e.target.value)}/></label>
                        </div>

                        <div className="grid grid-cols-2 gap-6 pt-4">
                            <label className="block text-[10px] font-black text-slate-400 uppercase text-blue-500">Markup % <input type="number" value={markup} className="block w-full mt-2 p-4 bg-blue-50 border-none ring-1 ring-blue-100 text-blue-700 font-black rounded-2xl" onChange={e => setMarkup(e.target.value)}/></label>
                            <label className="block text-[10px] font-black text-slate-400 uppercase text-green-500">Stay Discount % <input type="number" value={discount} className="block w-full mt-2 p-4 bg-green-50 border-none ring-1 ring-green-100 text-green-700 font-black rounded-2xl" onChange={e => setDiscount(e.target.value)}/></label>
                        </div>

                        <div className="bg-slate-900 rounded-[2rem] p-10 text-white text-center shadow-2xl relative overflow-hidden">
                            <div className="absolute top-0 right-0 w-32 h-32 bg-blue-500/10 rounded-full -mr-16 -mt-16 blur-3xl"></div>
                            <p className="text-[11px] font-black text-blue-400 uppercase tracking-[0.4em] mb-4">Final 2026 Quote</p>
                            <p className="text-6xl font-black tracking-tighter">${calculate().toLocaleString(undefined, {minimumFractionDigits: 2})}</p>
                            <div className="flex justify-between mt-8 text-[10px] font-black uppercase tracking-widest text-slate-500">
                                <span>{getNights()} Nights Stay</span>
                                <span>Inc. Speedboat & Green Tax</span>
                            </div>
                        </div>
                    </div>
                </div>
            );
        }
        ReactDOM.createRoot(document.getElementById('root')).render(<App />);
    </script>
</body>
</html>
