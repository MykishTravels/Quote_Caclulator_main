<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Mykish Travels | Ellaidhoo Precision Calc</title>
    <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-slate-100 p-8">
    <div id="root"></div>
    <script type="text/babel">
        const { useState } = React;

        const seasons = [
            { start: "2025-11-01", end: "2025-12-24", dbl: 315, child3: 79 },
            { start: "2025-12-25", end: "2026-01-05", dbl: 488, child3: 122 },
            { start: "2026-01-06", end: "2026-04-30", dbl: 418, child3: 105 },
            { start: "2026-05-01", end: "2026-09-30", dbl: 235, child3: 59 },
            { start: "2026-10-01", end: "2026-10-31", dbl: 315, child3: 79 }
        ];

        function App() {
            const [checkIn, setCheckIn] = useState("");
            const [checkOut, setCheckOut] = useState("");
            const [adults, setAdults] = useState(2);
            const [kids, setKids] = useState(0);
            const [markup, setMarkup] = useState(10);
            const [discount, setDiscount] = useState(0);

            const getNights = () => {
                if (!checkIn || !checkOut) return 0;
                const n = (new Date(checkOut) - new Date(checkIn)) / (1000 * 60 * 60 * 24);
                return n > 0 ? n : 0;
            };

            const getSeason = () => {
                const date = new Date(checkIn);
                return seasons.find(s => date >= new Date(s.start) && date <= new Date(s.end)) || seasons[0];
            };

            const calculate = () => {
                const nights = getNights();
                const season = getSeason();
                const totalPeople = parseInt(adults) + parseInt(kids);
                
                // 1. Stay Cost: 1st & 2nd child free. Only 3rd child is charged.
                const roomBase = season.dbl * nights;
                const extraChildCost = kids > 2 ? (season.child3 * nights * (kids - 2)) : 0;
                const stayTotal = roomBase + extraChildCost;

                // 2. Discount applies ONLY to Stay
                const discountedStay = stayTotal * (1 - (discount / 100));

                // 3. Transfers: $250/adult, $125/child (Speedboat Roundtrip)
                const transferTotal = (adults * 250) + (kids * 125);

                // 4. Markup applies to (Discounted Stay + Transfers)
                const subtotal = (discountedStay + transferTotal) * (1 + (markup / 100));

                // 5. Green Tax: $12 per person per night (Add at the very end)
                const greenTax = 12 * totalPeople * nights;

                return subtotal + greenTax;
            };

            return (
                <div className="max-w-2xl mx-auto bg-white rounded-3xl shadow-2xl overflow-hidden border">
                    <div className="bg-slate-900 p-8 text-white">
                        <h1 className="text-xl font-black italic tracking-widest">ELLAIDHOO MALDIVES</h1>
                        <p className="text-blue-400 text-[10px] font-bold uppercase mt-1">Winter 2025/26 - Professional Quote</p>
                    </div>
                    
                    <div className="p-8 space-y-6">
                        <div className="grid grid-cols-2 gap-4">
                            <label className="block text-[10px] font-bold text-slate-400 uppercase">Check-In <input type="date" className="block w-full mt-1 p-3 bg-slate-50 border rounded-xl" onChange={e => setCheckIn(e.target.value)}/></label>
                            <label className="block text-[10px] font-bold text-slate-400 uppercase">Check-Out <input type="date" className="block w-full mt-1 p-3 bg-slate-50 border rounded-xl" onChange={e => setCheckOut(e.target.value)}/></label>
                        </div>

                        <div className="grid grid-cols-2 gap-4">
                            <label className="block text-[10px] font-bold text-slate-400 uppercase">Adults <input type="number" value={adults} className="block w-full mt-1 p-3 bg-slate-50 border rounded-xl font-bold" onChange={e => setAdults(e.target.value)}/></label>
                            <label className="block text-[10px] font-bold text-slate-400 uppercase">Children (2-11) <input type="number" value={kids} className="block w-full mt-1 p-3 bg-slate-50 border rounded-xl font-bold" onChange={e => setKids(e.target.value)}/></label>
                        </div>

                        <div className="grid grid-cols-2 gap-4 border-t pt-6">
                            <label className="block text-[10px] font-bold text-slate-400 uppercase">Markup % <input type="number" value={markup} className="block w-full mt-1 p-3 bg-blue-50 text-blue-700 font-bold rounded-xl" onChange={e => setMarkup(e.target.value)}/></label>
                            <label className="block text-[10px] font-bold text-slate-400 uppercase">Stay Discount % <input type="number" value={discount} className="block w-full mt-1 p-3 bg-green-50 text-green-700 font-bold rounded-xl" onChange={e => setDiscount(e.target.value)}/></label>
                        </div>

                        <div className="bg-slate-900 rounded-2xl p-6 text-white text-center mt-4">
                            <p className="text-[10px] font-bold text-blue-400 uppercase tracking-widest mb-1">Total Quotation</p>
                            <p className="text-5xl font-black">${calculate().toLocaleString(undefined, {minimumFractionDigits: 2})}</p>
                            <div className="flex justify-between mt-4 text-[10px] opacity-50 font-bold uppercase">
                                <span>{getNights()} Nights Stay</span>
                                <span>Speedboat Transfer Inc.</span>
                            </div>
                        </div>
                    </div>
                </div>
            );
        }
        ReactDOM.createRoot(document.getElementById('root')).render(<App />);
    </script>
</body>
</html>
