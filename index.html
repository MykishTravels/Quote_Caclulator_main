<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Mykish Travels | Ellaidhoo Pro Engine</title>
    <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-slate-50 font-sans">
    <div id="root"></div>
    <script type="text/babel">
        const { useState } = React;

        const seasons = [
            { start: "2025-11-01", end: "2025-12-24", price: 315 }, // Winter Early
            { start: "2025-12-25", end: "2026-01-05", price: 488 }, // Festive
            { start: "2026-01-06", end: "2026-04-30", price: 418 }, // Winter High
            { start: "2026-05-01", end: "2026-09-30", price: 235 }  // Summer
        ];

        function App() {
            const [markup, setMarkup] = useState(10);
            const [discount, setDiscount] = useState(0);
            const [start, setStart] = useState("");
            const [end, setEnd] = useState("");
            const [adults, setAdults] = useState(2);
            const [kids, setKids] = useState(0);
            const [transferPrice, setTransferPrice] = useState(250); // Default Speedboat

            const getNights = () => {
                if(!start || !end) return 0;
                return Math.ceil((new Date(end) - new Date(start)) / (1000*60*60*24));
            };

            const getSeasonalRate = () => {
                const checkIn = new Date(start);
                const season = seasons.find(s => checkIn >= new Date(s.start) && checkIn <= new Date(s.end));
                return season ? season.price : 315; 
            };

            const calculate = () => {
                const nights = getNights();
                const people = parseInt(adults) + parseInt(kids);
                const rate = getSeasonalRate();

                const stayTotal = (rate * nights);
                const discountedStay = stayTotal * (1 - (discount / 100));
                
                const transTotal = (transferPrice * adults) + ((transferPrice / 2) * kids);
                const greenTax = 12 * people * nights;

                const subtotalWithMarkup = (discountedStay + transTotal) * (1 + (markup / 100));
                return subtotalWithMarkup + greenTax;
            };

            return (
                <div className="max-w-4xl mx-auto p-10">
                    <div className="bg-white rounded-[2rem] shadow-2xl overflow-hidden border">
                        <div className="p-8 bg-slate-900 text-white flex justify-between items-center">
                            <div>
                                <h1 className="text-2xl font-black italic">ELLAIDHOO MALDIVES</h1>
                                <p className="text-blue-400 text-[10px] font-bold uppercase tracking-widest">Confidential Agent Rates</p>
                            </div>
                            <div className="text-right">
                                <p className="text-4xl font-black text-blue-400">${calculate().toLocaleString()}</p>
                                <p className="text-[10px] opacity-50 font-bold uppercase">Total Quote (Inc. Tax & Markup)</p>
                            </div>
                        </div>

                        <div className="p-10 grid grid-cols-2 gap-8">
                            <div className="space-y-6">
                                <div>
                                    <label className="text-[10px] font-black text-slate-400 uppercase block mb-2">Check-In & Check-Out</label>
                                    <div className="flex gap-2">
                                        <input type="date" className="w-full p-3 bg-slate-50 rounded-xl border" onChange={e => setStart(e.target.value)} />
                                        <input type="date" className="w-full p-3 bg-slate-50 rounded-xl border" onChange={e => setEnd(e.target.value)} />
                                    </div>
                                </div>
                                <div className="grid grid-cols-2 gap-4">
                                    <div>
                                        <label className="text-[10px] font-black text-slate-400 uppercase block mb-1">Adults</label>
                                        <input type="number" value={adults} className="w-full p-3 bg-slate-50 rounded-xl border font-bold" onChange={e => setAdults(e.target.value)} />
                                    </div>
                                    <div>
                                        <label className="text-[10px] font-black text-slate-400 uppercase block mb-1">Kids (2-11)</label>
                                        <input type="number" value={kids} className="w-full p-3 bg-slate-50 rounded-xl border font-bold" onChange={e => setKids(e.target.value)} />
                                    </div>
                                </div>
                                <div>
                                    <label className="text-[10px] font-black text-slate-400 uppercase block mb-2">Transfer Mode</label>
                                    <select className="w-full p-3 bg-slate-50 rounded-xl border font-bold" onChange={e => setTransferPrice(e.target.value)}>
                                        <option value="250">Speedboat (90 Mins) - $250</option>
                                        <option value="399">Seaplane (25 Mins) - $399</option>
                                    </select>
                                </div>
                            </div>

                            <div className="bg-slate-50 p-6 rounded-3xl space-y-4 border border-slate-100">
                                <div className="flex justify-between text-sm">
                                    <span className="text-slate-500 font-bold uppercase text-[9px]">Stay ({getNights()} Nights)</span>
                                    <span className="font-bold text-slate-700">${(getSeasonalRate() * getNights()).toLocaleString()}</span>
                                </div>
                                <div className="flex justify-between text-sm text-green-600 font-bold">
                                    <span className="uppercase text-[9px]">Stay Discount ({discount}%)</span>
                                    <span>-${((getSeasonalRate() * getNights()) * (discount / 100)).toLocaleString()}</span>
                                </div>
                                <div className="flex justify-between text-sm">
                                    <span className="text-slate-500 font-bold uppercase text-[9px]">Green Tax (Inc. Kids)</span>
                                    <span className="font-bold text-slate-700">${(12 * (parseInt(adults) + parseInt(kids)) * getNights()).toLocaleString()}</span>
                                </div>
                                <div className="pt-4 border-t border-dashed">
                                    <label className="text-[10px] font-black text-slate-400 uppercase block mb-1">Adjust Markup (%)</label>
                                    <input type="number" value={markup} className="w-full p-2 bg-white rounded-lg border font-bold text-blue-600" onChange={e => setMarkup(e.target.value)} />
                                </div>
                                <div className="pt-2">
                                    <label className="text-[10px] font-black text-slate-400 uppercase block mb-1">Adjust Discount (%)</label>
                                    <input type="number" value={discount} className="w-full p-2 bg-white rounded-lg border font-bold text-green-600" onChange={e => setDiscount(e.target.value)} />
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            );
        }
        ReactDOM.createRoot(document.getElementById('root')).render(<App />);
    </script>
</body>
</html>
