<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Mykish Travels | Pro Quote Engine</title>
    <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;700;900&display=swap" rel="stylesheet">
    <style>body { font-family: 'Inter', sans-serif; }</style>
</head>
<body class="bg-slate-50 min-h-screen">
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useMemo } = React;

        // MASTER DATABASE (Expand this with your 40 PDFs later)
        const masterData = { "locations": [ { "name": "Maldives", "resorts": [ { "resortName": "Hurawalhi Island Resort", "currency": "USD", "rooms": [ { "type": "Ocean Villa", "price": 1007 }, { "type": "Beach Pool Villa", "price": 1271 } ], "activities": [ { "name": "Seaplane Transfer", "price": 470, "perPerson": true }, { "name": "Half Board Supplement", "price": 85, "perPerson": true } ] }, { "resortName": "Cinnamon Dhonveli", "currency": "USD", "rooms": [ { "type": "Water Bungalow", "price": 484 }, { "type": "Over Water Suite", "price": 590 } ], "activities": [ { "name": "Speedboat Transfer", "price": 170, "perPerson": true } ] } ] }, { "name": "Finland", "resorts": [ { "resortName": "Kakslauttanen Arctic Resort", "currency": "EUR", "rooms": [ { "type": "Glass Igloo", "price": 598 }, { "type": "Kelo-Glass Igloo", "price": 810 } ], "activities": [ { "name": "2H Husky Safari", "price": 178, "perPerson": true }, { "name": "Thermal Clothing", "price": 0, "perPerson": true } ] } ] } ] };

        function App() {
            const [globalMarkup, setGlobalMarkup] = useState(10);
            const [stayDiscount, setStayDiscount] = useState(0);
            const [quotes, setQuotes] = useState([{ id: Date.now(), resort: "", room: "", start: "", end: "", adults: 2, kids: 0, activities: [] }]);

            const addQuote = () => setQuotes([...quotes, { id: Date.now(), resort: "", room: "", start: "", end: "", adults: 2, kids: 0, activities: [] }]);
            const removeQuote = (id) => setQuotes(quotes.filter(q => q.id !== id));

            const calculateNights = (s, e) => {
                if (!s || !e) return 0;
                const n = (new Date(e) - new Date(s)) / (1000 * 60 * 60 * 24);
                return n > 0 ? n : 0;
            };

            const getQuoteTotal = (q) => {
                const resort = masterData.locations.flatMap(l => l.resorts).find(r => r.resortName === q.resort);
                if (!resort) return 0;
                const room = resort.rooms.find(rm => rm.type === q.room);
                const nights = calculateNights(q.start, q.end);
                const people = parseInt(q.adults || 0) + parseInt(q.kids || 0);

                const baseStay = ((room?.price || 0) * nights) * (1 - (stayDiscount / 100));
                const actTotal = q.activities.reduce((acc, name) => {
                    const a = resort.activities.find(item => item.name === name);
                    return acc + (a.perPerson ? a.price * people : a.price);
                }, 0);

                return (baseStay + actTotal) * (1 + (globalMarkup / 100));
            };

            return (
                <div className="p-4 max-w-6xl mx-auto">
                    <header className="flex flex-col md:flex-row justify-between items-center mb-12 py-8 border-b border-slate-200">
                        <div>
                            <h1 className="text-4xl font-black text-slate-900 tracking-tighter">MYKISH TRAVELS</h1>
                            <p className="text-slate-500 font-bold text-xs uppercase tracking-widest mt-1">Quotation Architect v3.0</p>
                        </div>
                        <div className="flex gap-4 mt-6 md:mt-0">
                            <div className="bg-white p-4 rounded-2xl shadow-sm border border-slate-200">
                                <p className="text-[10px] font-black text-slate-400 uppercase">Global Markup %</p>
                                <input type="number" value={globalMarkup} onChange={e => setGlobalMarkup(e.target.value)} className="text-2xl font-black text-blue-600 w-20 outline-none" />
                            </div>
                            <div className="bg-white p-4 rounded-2xl shadow-sm border border-slate-200">
                                <p className="text-[10px] font-black text-slate-400 uppercase">Stay Discount %</p>
                                <input type="number" value={stayDiscount} onChange={e => setStayDiscount(e.target.value)} className="text-2xl font-black text-emerald-600 w-20 outline-none" />
                            </div>
                        </div>
                    </header>

                    <div className="grid grid-cols-1 gap-8">
                        {quotes.map((q, idx) => (
                            <div key={q.id} className="bg-white rounded-[2.5rem] shadow-xl border border-slate-200 overflow-hidden flex flex-col md:flex-row">
                                <div className="p-8 md:w-2/3 space-y-8 border-r border-slate-100">
                                    <div className="flex justify-between items-center">
                                        <h2 className="text-xl font-black text-slate-800 italic">Option #{idx + 1}</h2>
                                        <button onClick={() => removeQuote(q.id)} className="text-red-400 text-xs font-bold uppercase hover:text-red-600">Remove</button>
                                    </div>
                                    
                                    <div className="grid grid-cols-1 md:grid-cols-2 gap-6">
                                        <div className="md:col-span-2">
                                            <label className="text-[10px] font-black text-slate-400 uppercase block mb-2">Select Destination</label>
                                            <select className="w-full p-4 bg-slate-50 rounded-2xl font-bold border-none ring-1 ring-slate-200 focus:ring-2 focus:ring-blue-500 outline-none" onChange={e => { const n = [...quotes]; n[idx].resort = e.target.value; n[idx].room=""; setQuotes(n); }}>
                                                <option>Choose a Resort...</option>
                                                {masterData.locations.flatMap(l => l.resorts).map(r => <option key={r.resortName}>{r.resortName}</option>)}
                                            </select>
                                        </div>
                                        
                                        <div>
                                            <label className="text-[10px] font-black text-slate-400 uppercase block mb-2">Check-In</label>
                                            <input type="date" className="w-full p-4 bg-slate-50 rounded-2xl font-bold ring-1 ring-slate-200" onChange={e => { const n = [...quotes]; n[idx].start = e.target.value; setQuotes(n); }} />
                                        </div>
                                        <div>
                                            <label className="text-[10px] font-black text-slate-400 uppercase block mb-2">Check-Out</label>
                                            <input type="date" className="w-full p-4 bg-slate-50 rounded-2xl font-bold ring-1 ring-slate-200" onChange={e => { const n = [...quotes]; n[idx].end = e.target.value; setQuotes(n); }} />
                                        </div>

                                        <div>
                                            <label className="text-[10px] font-black text-slate-400 uppercase block mb-2">Adults</label>
                                            <input type="number" value={q.adults} className="w-full p-4 bg-slate-50 rounded-2xl font-bold ring-1 ring-slate-200" onChange={e => { const n = [...quotes]; n[idx].adults = e.target.value; setQuotes(n); }} />
                                        </div>
                                        <div>
                                            <label className="text-[10px] font-black text-slate-400 uppercase block mb-2">Children</label>
                                            <input type="number" value={q.kids} className="w-full p-4 bg-slate-50 rounded-2xl font-bold ring-1 ring-slate-200" onChange={e => { const n = [...quotes]; n[idx].kids = e.target.value; setQuotes(n); }} />
                                        </div>
                                    </div>

                                    {q.resort && (
                                        <div className="space-y-6 pt-4 border-t border-dashed">
                                            <div>
                                                <label className="text-[10px] font-black text-slate-400 uppercase block mb-3">Room Category</label>
                                                <div className="grid grid-cols-1 gap-3">
                                                    {masterData.locations.flatMap(l => l.resorts).find(r => r.resortName === q.resort).rooms.map(rm => (
                                                        <button key={rm.type} onClick={() => { const n = [...quotes]; n[idx].room = rm.type; setQuotes(n); }} className={`p-5 rounded-2xl text-left border-2 transition-all ${q.room === rm.type ? 'border-blue-500 bg-blue-50 text-blue-700' : 'border-slate-100 hover:border-slate-200 text-slate-600'}`}>
                                                            <div className="flex justify-between font-black"><span>{rm.type}</span><span>${rm.price} /nt</span></div>
                                                        </button>
                                                    ))}
                                                </div>
                                            </div>

                                            <div>
                                                <label className="text-[10px] font-black text-slate-400 uppercase block mb-3">Add-Ons & Transfers</label>
                                                <div className="space-y-2">
                                                    {masterData.locations.flatMap(l => l.resorts).find(r => r.resortName === q.resort).activities.map(act => (
                                                        <label key={act.name} className={`flex items-center justify-between p-4 rounded-2xl border-2 cursor-pointer transition-all ${q.activities.includes(act.name) ? 'border-blue-200 bg-blue-50/50' : 'border-slate-50'}`}>
                                                            <div className="flex items-center gap-4">
                                                                <input type="checkbox" checked={q.activities.includes(act.name)} onChange={() => {
                                                                    const n = [...quotes];
                                                                    const cur = n[idx].activities;
                                                                    n[idx].activities = cur.includes(act.name) ? cur.filter(a => a !== act.name) : [...cur, act.name];
                                                                    setQuotes(n);
                                                                }} className="w-6 h-6 rounded-lg text-blue-600" />
                                                                <span className="font-bold text-slate-700">{act.name} {act.perPerson && <span className="text-[9px] text-slate-400 ml-1">(per person)</span>}</span>
                                                            </div>
                                                            <span className="font-black text-slate-900">${act.price}</span>
                                                        </label>
                                                    ))}
                                                </div>
                                            </div>
                                        </div>
                                    )}
                                </div>

                                <div className="p-10 bg-slate-900 text-white md:w-1/3 flex flex-col justify-center items-center text-center">
                                    <p className="text-[10px] font-black text-blue-400 uppercase tracking-[0.3em] mb-4">Total Quote</p>
                                    <h3 className="text-6xl font-black mb-6">${getQuoteTotal(q).toLocaleString(undefined, {minimumFractionDigits: 2})}</h3>
                                    <div className="space-y-2 text-slate-400 font-bold text-sm">
                                        <p>{calculateNights(q.start, q.end)} Nights</p>
                                        <p>{parseInt(q.adults || 0) + parseInt(q.kids || 0)} Guests</p>
                                    </div>
                                    <div className="mt-10 pt-10 border-t border-slate-800 w-full text-[10px] uppercase font-bold text-slate-500">
                                        Calculated with {globalMarkup}% Markup
                                    </div>
                                </div>
                            </div>
                        ))}
                    </div>

                    <button onClick={addQuote} className="mt-12 w-full p-6 border-4 border-dashed border-slate-200 rounded-[2.5rem] text-slate-300 font-black text-2xl hover:border-blue-200 hover:text-blue-200 transition-all active:scale-[0.99]">
                        + ADD COMPARISON OPTION
                    </button>
                </div>
            );
        }
        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>
